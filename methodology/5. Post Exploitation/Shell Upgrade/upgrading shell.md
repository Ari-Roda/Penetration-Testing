Netcat shells can unexpectedly close or crash quickly making us lose access to the target. Therefore after achieving exploitation and before getting persistenc it is beneficial to upgrade and stabilize your shell. This allos for commands like su and sudo to be used which previously werent possible.
The simplest way to upgrade to tty (text terminal) shell is iwth python one liner to run bash in python.

```python3 -c 'import pty; pty.spawn("/bin/bash")'```

```perl -e 'exec "/bin/bash";'```


GTFO bins can be used to find ways to get tty shell and this link has more methods to achieve this. blog.ropnop.com/upgrading-simple-shells-to-fully-interactive-ttys

Generally speaking, you want to use an external tool to execute /bin/bash for you. While doing so, it is a good idea to try everything you know, starting from python, finishing with getting a binary on the target system. 
List of static binaries you can get on the system: github.com/andrew-d/static-binaries

################################################################################################################################################################

id_rsa file that contains a private key that can be used to connect to a box via ssh. It is usually located in the .ssh folder in the user's home folder. (Full path: /home/user/.ssh/id_rsa)
Get that file on your system and give it read-only permissions 
(chmod 600 id_rsa) and connect by executing ssh -i id_rsa user@ip).

In case if the target box does not have a generated id_rsa file (or you simply don't have reading permissions for it), you can still gain stable ssh access. All you need to do is generate your own id_rsa key on your system and include an associated key into authorized_keys file on the target machine. 
Execute ssh-keygen and you should see id_rsa and id_rsa.pub files appear in your own .ssh folder. Copy the content of the id_rsa.pub file and put it inside the authorized_key file on the target machine (located in .ssh folder). After that, connect to the machine using your id_rsa file.

################################################################################################################################################################

Shell Upgrading and Stabilization:

You will be familiar with reverse shells from previous tasks or rooms; however, the shells you have been taught so far have had several fatal flaws. For example, pressing Ctrl + C killed the shell entirely. You could not use the arrow keys to see your shell history, and TAB autocompletes didn’t work. Stabilizing shells is an important skill to learn as it fixes all of these problems, providing a much nicer working environment.

Working inside the reverse shell:

The first thing to do is use ```python3 -c 'import pty;pty.spawn("/bin/bash")'```, which uses Python to spawn a better-featured bash shell. At this point, our shell will look a bit prettier, but we still won’t be able to use tab autocomplete or the arrow keys, and Ctrl + C will still kill the shell.
Step two is: export ```TERM=xterm``` – this will give us access to term commands such as clear.
Finally (and most importantly) we will background the shell using Ctrl + Z. Back in our own terminal we use ```stty raw -echo; fg```. This does two things: first, it turns off our own terminal echo (which gives us access to tab autocompletes, the arrow keys, and Ctrl + C to kill processes). It then foregrounds the shell, thus completing the process.
The full technique can be seen here:

Note that if the shell dies, any input in your own terminal will not be visible (as a result of having disabled terminal echo). To fix this, type reset and press enter.

